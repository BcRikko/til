---
layout: ../../../layouts/Layout.astro
pubDate: "2023-11-27"
updatedDate: "2023-11-27"
title: "CSSを動的に追加する方法"
author: ダーシノ
description: "CSSStyleSheetとdocument#adoptedStyleSheetsを使うと、JavaScriptからCSSを動的に追加できる。"
tags: ["CSS", "JavaScript"]
---

import Header from '../../../components/Header.astro'

<Header {...frontmatter} />

[CSSStyleSheet](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet)と[document#adoptedStyleSheets](https://developer.mozilla.org/en-US/docs/Web/API/Document/adoptedStyleSheets)を使うと、JavaScriptからCSSを動的に追加できる。

```js
import cssText from './path/to/styles.css' 
// or
const cssText = 'a { color: red; } .is-active { background-color: blue; }'

const sheet = new CSSStyleSheet()
sheet.replaceSync(cssText)

document.adoptedStyleSheets.push(style)
```

ただし別コンテキストには追加できないので、そのときは素直にstyle要素を作ってheadに追加するしかなさそう。

>  Failed to execute ‘indexed value’ on ‘ObservableArray`<CSSStyleSheet>`’: Sharing constructed stylesheets in multiple documents is not allowed
